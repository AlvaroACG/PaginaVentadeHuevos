<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hacer Pedido</title>
<link rel="stylesheet" href="style.css">
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>

<div id="navbar-container"></div>

<section class="form-card">
  <h2>Realizar Pedido ðŸ¥š</h2>
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  <form action="https://formsubmit.co/TU_EMAIL@GMAIL.COM" method="POST">
  
  <!-- ===== CONFIGURACIÃ“N DEL CORREO ===== -->
    <input type="hidden" name="_subject" value="ðŸ¥š NUEVO PEDIDO - HUEVOS FRESCOS ðŸ¥š">
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_next" value="https://tusitio.com/gracias.html">
    <input type="hidden" name="_autoresponse" value="âœ… Â¡Gracias por tu pedido! Te llamaremos para confirmar la entrega. Horario de atenciÃ³n: Lunes a SÃ¡bado 9:00-18:00 hrs.">
    
    <!-- ===== DATOS DEL CLIENTE ===== -->
    <h3>ðŸ“‹ INFORMACIÃ“N DE CONTACTO</h3>
    <input type="text" name="ðŸ‘¤ NOMBRE COMPLETO" placeholder="Ej: MarÃ­a GonzÃ¡lez" required>
    <input type="tel" name="ðŸ“± TELÃ‰FONO / WHATSAPP" placeholder="Ej: +56 9 1234 5678" required>
    <input type="text" name="ðŸ“ DIRECCIÃ“N DE ENTREGA" placeholder="Calle, nÃºmero, referencia" required>
    
    <!-- ===== PRODUCTOS ===== -->
    <h3>ðŸ¥š PRODUCTOS SOLICITADOS</h3>
    
    <label>ðŸ“¦ DOCENAS (30 huevos) - $2.400 c/u</label>
    <div class="qty-control">
      <button type="button" onclick="changeQty('docenas', -1)">-</button>
      <input type="number" id="docenas" name="ðŸ¥š DOCENAS (30 huevos)" value="0" min="0">
      <button type="button" onclick="changeQty('docenas', 1)">+</button>
    </div>
    
    <label>ðŸ“¦ BANDEJAS (30 huevos) - $6.000 c/u</label>
    <div class="qty-control">
      <button type="button" onclick="changeQty('bandejas', -1)">-</button>
      <input type="number" id="bandejas" name="ðŸ“¦ BANDEJAS (30 huevos)" value="0" min="0">
      <button type="button" onclick="changeQty('bandejas', 1)">+</button>
    </div>
    
    <!-- ===== TOTAL (se envÃ­a automÃ¡tico) ===== -->
    <h3>ðŸ’° TOTAL: $<span id="total">0</span></h3>
    <input type="hidden" name="ðŸ’° MONTO TOTAL" id="total-input">
    
    <!-- ===== FECHA Y HORA (automÃ¡tico) ===== -->
    <input type="hidden" name="ðŸ• FECHA DEL PEDIDO" id="fecha-input">
    <input type="hidden" name="ðŸŒ PÃGINA" value="Formulario Web">
    
    <!-- Cloudflare Turnstile -->
    <div class="cf-turnstile" data-sitekey="TU_SITE_KEY_AQUI"></div>
    
    <button type="submit" class="btn-primary">âœ… CONFIRMAR PEDIDO</button>
  </form>

<script>
// Calcular total
function changeQty(id, delta) {
  const input = document.getElementById(id);
  let val = parseInt(input.value) || 0;
  val = Math.max(0, val + delta);
  input.value = val;
  calcularTotal();
}

function calcularTotal() {
  const doc = parseInt(document.getElementById('docenas').value) || 0;
  const ban = parseInt(document.getElementById('bandejas').value) || 0;
  const total = (doc * 2400) + (ban * 6000);
  document.getElementById('total').textContent = total;
  document.getElementById('total-input').value = '$' + total.toLocaleString('es-CL');
}

// Antes de enviar
document.querySelector('form').addEventListener('submit', function() {
  // Fecha actual
  const ahora = new Date();
  const fecha = ahora.toLocaleString('es-CL', {
    day: '2-digit',
    month: '2-digit',
    year: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
  document.getElementById('fecha-input').value = fecha;
  
  // Total
  calcularTotal();
});

// Inicializar
calcularTotal();
</script>
</section>

<script>
function changeQty(id, amount) {
  const input = document.getElementById(id);
  let value = parseInt(input.value) || 0;
  value += amount;
  if (value < 0) value = 0;
  input.value = value;
  calcular();
}

function calcular() {
  const doc = parseInt(document.getElementById("docenas").value) || 0;
  const ban = parseInt(document.getElementById("bandejas").value) || 0;
  const total = (doc * 2400) + (ban * 6000);
  document.getElementById("total").textContent = total;
}

document.getElementById("docenas").addEventListener("input", calcular);
document.getElementById("bandejas").addEventListener("input", calcular);
</script>

<script>
fetch("navbar.html")
  .then(res => res.text())
  .then(data => {
    document.getElementById("navbar-container").innerHTML = data;
  });
</script>

</body>
</html>

